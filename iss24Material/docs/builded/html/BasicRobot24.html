
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>BasicRobot24 &#8212; iss24 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Studenti2024" href="Studenti2024.html" />
    <link rel="prev" title="robotposweb" href="RobotPosWeb.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Studenti2024.html" title="Studenti2024"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="RobotPosWeb.html" title="robotposweb"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">iss24 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">BasicRobot24</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="basicrobot24">
<h1>BasicRobot24<a class="headerlink" href="#basicrobot24" title="Permalink to this heading">¶</a></h1>
<p><span class="slide3">progetto unibo.basicrobot24</span>  <a class="reference external" href="../../../../../unibo.basicrobot24">unibo.basicrobot24</a></p>
<p>Obiettivo: introdurre un componente software che esegue comandi di spostamento di un DDR-robot
ed altre funzionalità utili.</p>
<p>Il servizio offre anche un modo di operare in modo indipendente dalla tecnologia con cui è
realizzato uno specifico DDR robot (virtuale o reale).</p>
<section id="br24-requisito-tipidirobot">
<h2>BR24 requisito  tipidirobot<a class="headerlink" href="#br24-requisito-tipidirobot" title="Permalink to this heading">¶</a></h2>
<p>Facciamo riferimento ad almeno tre diversi tipi di robot:</p>
<ul class="simple">
<li><p><a class="reference internal" href="VirtualRobot23.html#virtualrobot23"><span class="std std-ref">VirtualRobot23</span></a></p></li>
<li><p><a class="reference external" href="../../../../../unibo.basicrobot24/userDocs/Mbot2020.html">Mbot</a> (realmbot)</p></li>
<li><p><a class="reference external" href="../../../../../unibo.basicrobot24/userDocs/LabNanoRobot.html">NanoRobot</a> (realnano)</p></li>
</ul>
<a class="reference internal image-reference" href="_images/basicrobotComponent.PNG"><img alt="_images/basicrobotComponent.PNG" class="align-center" src="_images/basicrobotComponent.PNG" style="width: 60%;" /></a>
<section id="br24-una-prima-architettura">
<h3>BR24 Una prima architettura<a class="headerlink" href="#br24-una-prima-architettura" title="Permalink to this heading">¶</a></h3>
<p>Si delinea una architettura come quella anticipata in <a class="reference internal" href="RobotCleaner.html#verso-un-robot-service"><span class="std std-ref">RobotCleaner</span></a> e qui riportata:</p>
<a class="reference internal image-reference" href="_images/basicrobotproject.PNG"><img alt="_images/basicrobotproject.PNG" class="align-center" src="_images/basicrobotproject.PNG" style="width: 50%;" /></a>
</section>
<section id="br24-configurazione">
<h3>BR24: configurazione<a class="headerlink" href="#br24-configurazione" title="Permalink to this heading">¶</a></h3>
<p>La utility class <a class="reference external" href="../../../../../unibo.basicrobot24/src/main/resources/uniborobots/robotSupport.kt">robotSupport.kt</a> si occupa dei dettagli tecnologici specifici di ogni
<a class="reference internal" href="#br24-requisito-tipidirobot"><span class="std std-ref">tipo di robot</span></a> utilizzando un supporto diverso per ciascun tipo.</p>
<section id="br24-supporti">
<h4>BR24: supporti<a class="headerlink" href="#br24-supporti" title="Permalink to this heading">¶</a></h4>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="_images/wenvscene1.PNG"><img alt="_images/wenvscene1.PNG" class="align-center" src="_images/wenvscene1.PNG" style="width: 90%;" /></a>
</td>
<td><p>per il VirtualRobot: <a class="reference external" href="../../../../../unibo.basicrobot24/src/main/resources/robotVirtual/virtualrobotSupport23.kt">virtualrobotSupport</a></p></td>
</tr>
<tr class="row-even"><td><a class="reference internal image-reference" href="_images/robotsUnibo.jpg"><img alt="_images/robotsUnibo.jpg" class="align-center" src="_images/robotsUnibo.jpg" style="width: 90%;" /></a>
</td>
<td><p>per il  NanoRobot: <a class="reference external" href="../../../../../unibo.basicrobot24/src/main/resources/robotNano/nanoSupport.kt">nanoSupport</a>, <a class="reference external" href="../../../../../unibo.basicrobot24/src/main/resources/robotNano/Motors.c">motors</a></p></td>
</tr>
<tr class="row-odd"><td><a class="reference internal image-reference" href="_images/mbot.PNG"><img alt="_images/mbot.PNG" class="align-center" src="_images/mbot.PNG" style="width: 90%;" /></a>
</td>
<td><p>per Mbot: <a class="reference external" href="../../../../../unibo.basicrobot24/userDocs/Mbot2020.html">mbotSupport</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="br24-file-di-configurazione">
<h4>BR24 File di configurazione<a class="headerlink" href="#br24-file-di-configurazione" title="Permalink to this heading">¶</a></h4>
<p>Il file di configurazione  è impostato su frasi JSon, come ad esempio il seguente
<code class="docutils literal notranslate"><span class="pre">basicrobotConfig.json</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;virtual&quot;</span><span class="p">,</span><span class="s2">&quot;port&quot;</span><span class="p">:</span><span class="s2">&quot;8090&quot;</span><span class="p">,</span><span class="s2">&quot;ipvirtualrobot&quot;</span><span class="p">:</span><span class="s2">&quot;...&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;realnano&quot;</span><span class="p">,</span><span class="s2">&quot;port&quot;</span><span class="p">:</span><span class="s2">&quot;8020&quot;</span><span class="p">,</span><span class="s2">&quot;ipvirtualrobot&quot;</span><span class="p">:</span><span class="s2">&quot;dontcare&quot;</span><span class="p">}</span>
<span class="o">//</span><span class="n">Arduino</span> <span class="n">connesso</span> <span class="n">al</span> <span class="n">Raspberry</span><span class="p">:</span>
<span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;realmbot&quot;</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span><span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">,</span> <span class="s2">&quot;ipvirtualrobot&quot;</span><span class="p">:</span><span class="s2">&quot;-&quot;</span><span class="p">}</span>
<span class="o">//</span><span class="n">Arduino</span> <span class="n">connesso</span> <span class="n">al</span> <span class="n">PC</span><span class="p">:</span>
<span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;realmbot&quot;</span><span class="p">,</span><span class="s2">&quot;port&quot;</span><span class="p">:</span><span class="s2">&quot;COM6&quot;</span><span class="p">,</span><span class="s2">&quot;ipvirtualrobot&quot;</span><span class="p">:</span><span class="s2">&quot;dontcare&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p><span class="slide">Il progetto unibo.basicrobot24</span></p>
<p>Il codice è contenuto nel progetto  <a class="reference external" href="../../../../../unibo.basicrobot24">unibo.basicrobot24</a>, che fornisce il modello eseguibile
<a class="reference external" href="../../../../../unibo.basicrobot24/src/basicrobot.qak">basicrobotqak</a>, che include i componenti riportati nella figura (generata) che segue:</p>
<a class="reference internal image-reference" href="_images/basicrobot24.PNG"><img alt="_images/basicrobot24.PNG" class="align-center" src="_images/basicrobot24.PNG" style="width: 100%;" /></a>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 60%" />
<col style="width: 40%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Componenti (attori):</p>
<ul class="simple">
<li><p><span class="blue">basicrobot</span>: esegue i comandi di spostamento e altre funzionalità</p></li>
<li><p><span class="blue">engager</span>: gestisce l’ingaggio del robot</p></li>
<li><p><span class="blue">planexec</span>: esegue piani di movimento</p></li>
<li><p><span class="blue">robotpos</span>: realizza il posizionamento del robot in una cella data della mappa</p></li>
</ul>
</td>
<td><p><span class="slide3">I progetti di riferimento</span>:</p>
<ul class="simple">
<li><p><a class="reference external" href="../../../../../unibo.basicrobot24">unibo.basicrobot24</a></p></li>
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="br24-le-funzioni">
<h3>BR24 Le funzioni<a class="headerlink" href="#br24-le-funzioni" title="Permalink to this heading">¶</a></h3>
<p>Il componente <span class="blue">basicrobot</span> viene visto dall’esterno come un servizio che realizza un insieme di funzionalità:</p>
<ol class="arabic simple">
<li><p>Esecuzione di richieste di <span class="brown">ingaggio</span>: messaggio <span class="high">Request engage:engage(CALLER)</span></p></li>
<li><p>Esecuzione di <span class="brown">comandi elementari</span> di movimento: messaggio <span class="high">Dispatch cmd:cmd(MOVE)</span></p></li>
<li><p>Esecuzione di <span class="brown">step</span> (movimento in avanti per un tempo dato): messaggio <span class="high">Request step:step(TIME)</span></p></li>
<li><p>Esecuzione di <span class="brown">sequenze di movimento</span> (piani): messaggio <span class="high">Request doplan:doplan(PATH,STEPTIME)</span></p></li>
<li><p>Esecuzione di <span class="brown">posizionamento</span>: messaggio <span class="high">Request moverobot:moverobot(TARGETX, TARGETY)</span></p></li>
</ol>
<p>Il <span class="blue">basicrobot</span> esegue le funzioni 2-5 solo dopo essere stato ingaggiato da chi lo vuole
utilizzare.</p>
<p>Per agevolare il testing, un utlizzatore (di solito una console) di nome <span class="slide2">gui23xyz9526</span> viene sempre
ammesso all’uso del robot.</p>
<p>Internamente, il <span class="blue">basicrobot</span>:</p>
<ul class="simple">
<li><p>delega <span class="high">engage/disengage</span> al componente <span class="blue">engager</span>, che utlizza un POJO di classe <cite>OwnerManager</cite></p></li>
<li><p>delega <span class="high">doplan</span> al componente <span class="blue">planexec</span>, che utlizza <cite>OwnerManager</cite></p></li>
<li><p>delega <span class="high">moverobot</span> al componente <span class="blue">robotpos</span>, che utilizza <a class="reference internal" href="Planner.html#id1"><span class="std std-ref">Planner23Util</span></a> e una mappa
della stanza</p></li>
</ul>
</section>
<section id="br24-e-le-mappatura-dell-ambiente">
<h3>BR24 e le mappatura dell’ambiente<a class="headerlink" href="#br24-e-le-mappatura-dell-ambiente" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 65%" />
<col style="width: 35%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Il concetto di <span class="slide2">posizione</span> viene formalizato introducendo una coppia di coordinate cartesiane che identifica
una cella della mappa.</p></td>
<td><a class="reference internal image-reference" href="_images/griglia.PNG"><img alt="_images/griglia.PNG" class="align-center" src="_images/griglia.PNG" style="width: 100%;" /></a>
</td>
</tr>
</tbody>
</table>
<p>Muovere il robot con mossa <code class="docutils literal notranslate"><span class="pre">step(T)</span></code> con tempo <code class="docutils literal notranslate"><span class="pre">T</span></code> tale da spostare il robot (con velocità prefissata)
di uno spazio <code class="docutils literal notranslate"><span class="pre">D</span></code>, permette di costruire una <span class="slide2">mappa della stanza</span> formata da celle quadrate <code class="docutils literal notranslate"><span class="pre">DxD</span></code>.
Ad esempio:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="n">x</span>
<span class="mi">0</span> <span class="o">|</span><span class="n">r</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="mi">1</span> <span class="o">|</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="mi">2</span> <span class="o">|</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="mi">3</span> <span class="o">|</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="mi">4</span> <span class="o">|</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="mi">5</span> <span class="o">|</span><span class="n">X</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span>
<span class="n">y</span>
</pre></div>
</div>
</td>
<td><ul class="simple">
<li><p><strong>0</strong> denota una cella mai percorsa</p></li>
<li><p><strong>1</strong> denota una cella libreria</p></li>
<li><p><strong>X</strong> denota una cella occupata da un ostacolo</p></li>
<li><p><strong>r</strong> denota la posizione corrente del robot</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Un modo per costruire dinamicamente una sequenza di mosse con cui il robot può muoversi dalla posizione
corrente <strong>r</strong> a un’altra posizione (libera) sulla mappa, consiste
nell’<a class="reference internal" href="#br24-planexec"><span class="std std-ref">utilizzo del pianificatore</span></a>.</p>
</section>
<section id="br24-componenti">
<h3>BR24 Componenti<a class="headerlink" href="#br24-componenti" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><span class="blue">engager</span></p></td>
<td><p>Gestisce i messaggi <span class="high">engage/disengage</span> usando un oggetto Kotlin <span class="brown">OwnerManager</span>.
La richiesta <span class="high">engage</span> produce la risposta <span class="high">engagedone</span> in caso il robot sia libero
e <span class="high">engagerefused</span> nel caso di robot già ingaggiato.</p></td>
</tr>
<tr class="row-even"><td><p><span class="blue">planexec</span></p></td>
<td><p>Gestisce richieste <span class="high">doplan</span> di esecuzione di una sequenza di mosse, inviando comandi
al <span class="blue">basicrobot</span> e
invia la risposta <span class="high">doplandone</span> in caso di successo. Nel caso di ostacolo o di evento <span class="high">alarm</span>,
interrompe la esecuzione della sequenza, inviando la risposta <span class="high">doplanfailed</span>.</p>
<p>Non usa (e quindi non aggiorna) alcuna mappa della stanza.</p>
</td>
</tr>
<tr class="row-odd"><td><p><span class="blue">robotpos</span></p></td>
<td><p>Gestisce richieste di posizionamento <span class="high">moverobot</span>. Facendo <a class="reference internal" href="Planner.html#uso-del-planner"><span class="std std-ref">Uso del planner</span></a>, determina un
piano di movimento per raggiungere la destinazione, che esegue usando <span class="blue">planexec</span>. Invia
la risposta <span class="high">moverobotdone</span> in caso di successo oppure <span class="high">moverobotfailed</span> se la esecuzione
del piano fallisce o viene interrotta.</p>
<p>Gestisce anche il comando di utilità <span class="high">Dispatch setrobotstate:setpos(X,Y,D)</span> per allienare la
rappresentazione del planner sulla posizione corrente reale del robot fissata manualmente.</p>
</td>
</tr>
<tr class="row-even"><td><p><span class="blue">basicrobot</span></p></td>
<td><p>Gestisce direttamente comandi elementari <span class="high">cmd</span> e richieste <span class="high">step</span> (inviando
la risposta <span class="high">stepdone</span> in caso di successo e <span class="high">stepfailed</span> in caso di ostacolo).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="br24-messaggi">
<h3>BR24 messaggi<a class="headerlink" href="#br24-messaggi" title="Permalink to this heading">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">System</span><span class="w"> </span><span class="n">BR24</span>

<span class="n">Dispatch</span><span class="w"> </span><span class="n">cmd</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="n">cmd</span><span class="p">(</span><span class="n">MOVE</span><span class="p">)</span><span class="w">      </span><span class="c1">//MOVE=w|s|d|a|r|l|h</span>
<span class="n">Dispatch</span><span class="w"> </span><span class="n">end</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="n">end</span><span class="p">(</span><span class="n">ARG</span><span class="p">)</span>

<span class="n">Request</span><span class="w"> </span><span class="n">step</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="n">step</span><span class="p">(</span><span class="n">TIME</span><span class="p">)</span>
<span class="n">Reply</span><span class="w"> </span><span class="n">stepdone</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="n">stepdone</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="n">Reply</span><span class="w"> </span><span class="n">stepfailed</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="n">stepfailed</span><span class="p">(</span><span class="n">DURATION</span><span class="p">,</span><span class="w"> </span><span class="n">CAUSE</span><span class="p">)</span>

<span class="n">Event</span><span class="w">  </span><span class="n">sonardata</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="n">sonar</span><span class="p">(</span><span class="w"> </span><span class="n">DISTANCE</span><span class="w"> </span><span class="p">)</span><span class="w">        </span><span class="c1">//percepito da sonarobs/engager</span>
<span class="n">Event</span><span class="w"> </span><span class="n">obstacle</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="n">obstacle</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">Request</span><span class="w">  </span><span class="n">doplan</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="n">doplan</span><span class="p">(</span><span class="w"> </span><span class="n">PATH</span><span class="p">,</span><span class="w"> </span><span class="n">STEPTIME</span><span class="w"> </span><span class="p">)</span>
<span class="n">Reply</span><span class="w"> </span><span class="n">doplandone</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="n">doplandone</span><span class="p">(</span><span class="w"> </span><span class="n">ARG</span><span class="w"> </span><span class="p">)</span>
<span class="n">Reply</span><span class="w"> </span><span class="n">doplanfailed</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="n">doplanfailed</span><span class="p">(</span><span class="w"> </span><span class="n">ARG</span><span class="w"> </span><span class="p">)</span>

<span class="n">Dispatch</span><span class="w"> </span><span class="n">setrobotstate</span><span class="p">:</span><span class="w"> </span><span class="n">setpos</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">D</span><span class="p">)</span>
<span class="n">Dispatch</span><span class="w"> </span><span class="n">setdirection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">dir</span><span class="p">(</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="p">)</span><span class="w">  </span><span class="c1">//D =up|down!left|right</span>

<span class="n">Request</span><span class="w"> </span><span class="n">engage</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="n">engage</span><span class="p">(</span><span class="n">CALLER</span><span class="p">)</span>
<span class="n">Reply</span><span class="w">   </span><span class="n">engagedone</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="n">engagedone</span><span class="p">(</span><span class="n">ARG</span><span class="p">)</span>
<span class="n">Reply</span><span class="w">   </span><span class="n">engagerefused</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">engagerefused</span><span class="p">(</span><span class="n">ARG</span><span class="p">)</span>

<span class="n">Dispatch</span><span class="w"> </span><span class="n">disengage</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="n">disengage</span><span class="p">(</span><span class="n">ARG</span><span class="p">)</span>

<span class="n">Event</span><span class="w"> </span><span class="n">alarm</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="n">alarm</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">Dispatch</span><span class="w"> </span><span class="n">nextmove</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="n">nextmove</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
<span class="n">Dispatch</span><span class="w"> </span><span class="n">nomoremove</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="n">nomoremove</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>

<span class="c1">//Endosimbiosi di robotpos</span>
<span class="n">Request</span><span class="w"> </span><span class="n">moverobot</span><span class="w">    </span><span class="p">:</span><span class="w">  </span><span class="n">moverobot</span><span class="p">(</span><span class="n">TARGETX</span><span class="p">,</span><span class="w"> </span><span class="n">TARGETY</span><span class="p">)</span>
<span class="n">Reply</span><span class="w"> </span><span class="n">moverobotdone</span><span class="w">  </span><span class="p">:</span><span class="w">  </span><span class="n">moverobotok</span><span class="p">(</span><span class="n">ARG</span><span class="p">)</span>
<span class="n">Reply</span><span class="w"> </span><span class="n">moverobotfailed</span><span class="p">:</span><span class="w">  </span><span class="n">moverobotfailed</span><span class="p">(</span><span class="n">PLANDONE</span><span class="p">,</span><span class="w"> </span><span class="n">PLANTODO</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="br24-come-esecutore-di-movimenti">
<h2>BR24 come esecutore di movimenti<a class="headerlink" href="#br24-come-esecutore-di-movimenti" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>Il robot è un oggetto di dimensioni finite, inscrivibile in un cerchio di diametro <code class="docutils literal notranslate"><span class="pre">D</span></code> (<strong>unità robotica</strong>) ed esegue
movimenti a velocità costante.</p></li>
<li><p>Il <a class="reference internal" href="#basicrobot24"><span class="std std-ref">basicrobot</span></a> fornito dal committente è un puro <span class="remark">esecutore di comandi</span>, con cui il robot
può effettuare singole mosse o sequenze di mosse, a seguito di messaggi di richiesta.</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><span class="blue">Dispatch cmd:cmd(M)</span></p></td>
<td><p>Il robot cerca di eseguire la mossa <code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">(w|s|a|d|l|r|h)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><span class="blue">Request step:step(T)</span></p></td>
<td><p>Il robot cerca di fare un movimento in avanti di durata <code class="docutils literal notranslate"><span class="pre">T</span></code> e risponde con:</p>
<ul class="simple">
<li><p><span class="blue">Reply stepdon:stepdon(ok)</span> in caso di successo</p></li>
<li><p><span class="blue">Reply stepfailed:stepfailed(DURATION,CAUSE)</span> in caso di fallimento</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><span class="blue">Request doplan:doplan( PLAN, OWNER, STEPTIME )</span></p></td>
<td><p>Il robot cerca di eseguire (via <a class="reference internal" href="RobotPos.html#planexec"><span class="std std-ref">planexec</span></a>) la sequenza di mosse <code class="docutils literal notranslate"><span class="pre">PLAN</span></code>
e risponde con:</p>
<ul class="simple">
<li><p><span class="blue">Reply doplandone:doplandone(ok)</span> in caso di successo</p></li>
<li><p><span class="blue">Reply doplanfailed:doplanfailed(PLANTODO)</span> in caso di fallimento</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p><span class="slide1">La esecuzione di un piano</span></p>
</section>
<section id="br24-planexec">
<h2>BR24 planexec<a class="headerlink" href="#br24-planexec" title="Permalink to this heading">¶</a></h2>
<p>L’attore <span class="blue">planexec</span> ha il compito di eseguire un piano definito come una sequenza di mosse.</p>
<p>La sequenza di mosse che definisce un piano può essere espressa in  <strong>forma verbosa</strong> (ad esempio <code class="docutils literal notranslate"><span class="pre">[w,</span> <span class="pre">w,</span> <span class="pre">l,</span> <span class="pre">w,</span> <span class="pre">w]</span></code>) oppure
in <strong>forma compatta</strong>  (ad esempio <code class="docutils literal notranslate"><span class="pre">wwlww</span></code>).</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Il  messaggio di richiesta di esecuzione di un piano ha la forma:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Request</span> <span class="n">doplan</span><span class="p">:</span><span class="n">doplan</span><span class="p">(</span><span class="n">PLAN</span><span class="p">,</span><span class="n">OWNER</span><span class="p">,</span><span class="n">STEPTIME</span><span class="p">)</span>
</pre></div>
</div>
</td>
<td><ul class="simple">
<li><p><span class="blue">PLAN</span>: la sequenza di mosse da eseguire, espressa in <em>forma verbosa</em> oppure
in <em>forma compatta</em> ;</p></li>
<li><p><span class="blue">OWNER</span>:  il nome dell’attore chiamante (che ha ingaggiato il <a class="reference internal" href="#basicrobot24"><span class="std std-ref">basicrobot</span></a>);</p></li>
<li><p><span class="blue">STEPTIME</span>: il tempo (in msec) di esecuzione dello <a class="reference internal" href="VrobotLLMoves24.html#step"><span class="std std-ref">step</span></a> da parte del <a class="reference internal" href="#basicrobot24"><span class="std std-ref">basicrobot</span></a>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>A questa richiesta, il <span class="blue">planexec</span> risponde con due possibili messaggi di risposta:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Reply</span> <span class="n">doplandone</span>    <span class="p">:</span> <span class="n">doplandone</span><span class="p">(</span> <span class="n">ARG</span> <span class="p">)</span>
<span class="n">Reply</span> <span class="n">doplanfailed</span>  <span class="p">:</span> <span class="n">doplanfailed</span><span class="p">(</span> <span class="n">ARG</span> <span class="p">)</span>
</pre></div>
</div>
</td>
<td><ul class="simple">
<li><p>Nel caso di successo (<strong>doplandone</strong>) l’argomento <code class="docutils literal notranslate"><span class="pre">ARG</span></code> del payload della reply non è significativo. In futuro potrebbe rappresentare
il tempo di esecuzione.</p></li>
<li><p>Nel caso di fallimento (<strong>doplanfailed</strong>) l’argomento <code class="docutils literal notranslate"><span class="pre">ARG</span></code> del payload della reply rappresenta la porzione di
PLAN che è stata eseguita prima del fallimento (per allarme o per l’incontro di un ostacolo).</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#br24-esperimenti-di-uso-con-virtualrobot"><span class="std std-ref">BR24 Esperimenti di uso (con VirtualRobot)</span></a></p>
</section>
<section id="br24-esperimenti-di-uso-con-virtualrobot">
<h2>BR24 Esperimenti di uso (con VirtualRobot)<a class="headerlink" href="#br24-esperimenti-di-uso-con-virtualrobot" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Posizionarsi sulla direcory <span class="high">unibo.basicrobot24</span></p></li>
<li><p>Attivare il VirtualRobot con il comando <span class="high">docker-compose -f virtualRobot23.yaml up</span></p></li>
<li><p>Attivare il basic robot on il comando <span class="high">gradlew run</span></p></li>
<li><p>Aprire la pagina HTML <a class="reference external" href="../../../../../planusage24/src/main/resources/MapGui.html">MapGui.html</a> in <a class="reference external" href="../../../../../planusage24">planusage24</a>, che offre una GUI che usa MQTT per inviare comandi
al basicrobot e per ricevere informazioni di stato sia dal basicrobot sia dal planner</p></li>
<li><p>Attivare <a class="reference internal" href="Planner.html#id4"><span class="std std-ref">mapobstaclesrobot.qak</span></a>  in <a class="reference external" href="../../../../../planusage24">planusage24</a> che usa il <a class="reference internal" href="Planner.html#planner"><span class="std std-ref">Planner</span></a> per esplorazione in colonne vertcali</p></li>
<li><p>Altro esprimento con <a class="reference external" href="../../../../../planusage24/src/mapobstaclesplan.qaktt">mapobstaclesplan.qak</a> in <a class="reference external" href="../../../../../planusage24">planusage24</a>, che cerca di raggiungere una cella fuori dalla mappa</p></li>
</ol>
</section>
<section id="br24-facade">
<h2>BR24 Facade<a class="headerlink" href="#br24-facade" title="Permalink to this heading">¶</a></h2>
<p>Il basicrobot può anche essere usato mediante un Browser collegandosi alla porta 8085.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BasicRobot24</a><ul>
<li><a class="reference internal" href="#br24-requisito-tipidirobot">BR24 requisito  tipidirobot</a><ul>
<li><a class="reference internal" href="#br24-una-prima-architettura">BR24 Una prima architettura</a></li>
<li><a class="reference internal" href="#br24-configurazione">BR24: configurazione</a><ul>
<li><a class="reference internal" href="#br24-supporti">BR24: supporti</a></li>
<li><a class="reference internal" href="#br24-file-di-configurazione">BR24 File di configurazione</a></li>
</ul>
</li>
<li><a class="reference internal" href="#br24-le-funzioni">BR24 Le funzioni</a></li>
<li><a class="reference internal" href="#br24-e-le-mappatura-dell-ambiente">BR24 e le mappatura dell’ambiente</a></li>
<li><a class="reference internal" href="#br24-componenti">BR24 Componenti</a></li>
<li><a class="reference internal" href="#br24-messaggi">BR24 messaggi</a></li>
</ul>
</li>
<li><a class="reference internal" href="#br24-come-esecutore-di-movimenti">BR24 come esecutore di movimenti</a></li>
<li><a class="reference internal" href="#br24-planexec">BR24 planexec</a></li>
<li><a class="reference internal" href="#br24-esperimenti-di-uso-con-virtualrobot">BR24 Esperimenti di uso (con VirtualRobot)</a></li>
<li><a class="reference internal" href="#br24-facade">BR24 Facade</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="RobotPosWeb.html"
                          title="previous chapter">robotposweb</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Studenti2024.html"
                          title="next chapter">Studenti2024</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/BasicRobot24.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Studenti2024.html" title="Studenti2024"
             >next</a> |</li>
        <li class="right" >
          <a href="RobotPosWeb.html" title="robotposweb"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">iss24 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">BasicRobot24</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2024, Antonio Natali.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
    </div>
  </body>
</html>